<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="pmed">
<title>pmed_RWD • pmed</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="pmed_RWD">
<meta property="og:description" content="pmed">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">pmed</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pmed_RWD.html">pmed_RWD</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nicheerfeng/pmed/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>pmed_RWD</h1>
                        <h4 data-toc-skip class="author">Teague Tian</h4>
            
            <h4 data-toc-skip class="date">r Sys.Date</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nicheerfeng/pmed/blob/HEAD/vignettes/pmed_RWD.Rmd" class="external-link"><code>vignettes/pmed_RWD.Rmd</code></a></small>
      <div class="d-none name"><code>pmed_RWD.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nicheerfeng/pmed" class="external-link">pmed</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="goal">Goal:<a class="anchor" aria-label="anchor" href="#goal"></a>
</h2>
<p>An R package for building virtual datasets to simulate real world medical data in actual production environment, which are mainly used for related research of RWD projects, including accelerating data analysis and providing optimized batch functions.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of pmed from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># waring：</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">rlang</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">1</span>.<span class="fl">0.2</span> is a prerequisite <span class="cf">for</span> installing this R package</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>It is recommended that you use R version later than <span class="fl">4.2</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"nicheerfeng/pmed"</span>)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="main-function">Main function<a class="anchor" aria-label="anchor" href="#main-function"></a>
</h2>
<div class="section level3">
<h3 id="auxiliary-medical-statistical-function">Auxiliary medical statistical function<a class="anchor" aria-label="anchor" href="#auxiliary-medical-statistical-function"></a>
</h3>
<p><strong>packages list</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List of commonly used R packages of medical statistics</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>?pmed<span class="sc">::</span>load_pkg<span class="st">'</span></span></code></pre></div>
<p><strong>Generate virtual datasets for multiple patients</strong></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">data_med_new</span> <span class="op">=</span> <span class="fu"><a href="../reference/virtual_med_mulp.html">virtual_med_mulp</a></span><span class="op">(</span>patient_n <span class="op">=</span> <span class="fl">24</span>,</span>
<span>    birth_start_date <span class="op">=</span> <span class="st">"1980-01-01"</span>,birth_end_date <span class="op">=</span><span class="st">"2000-12-31"</span> ,</span>
<span>   study_start_date <span class="op">=</span> <span class="st">"2014-01-01"</span>,study_end_date <span class="op">=</span><span class="st">"2020-12-31"</span>,</span>
<span>   average_year_visit_n <span class="op">=</span> <span class="fl">6</span>,ncores<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span></code></pre></div>
<p><strong>Load virtual medical records for 50 virtual patients</strong></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span></code></pre></div>
<p><strong>Quick conversion of common parameters</strong></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span><span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/tr.html">tr</a></span><span class="op">(</span><span class="va">.</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patient_id"</span>,<span class="st">"visit_id"</span><span class="op">)</span>,<span class="st">"cha"</span><span class="op">)</span></span>
<span><span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/tr.html">tr_nst</a></span><span class="op">(</span><span class="va">.</span>,<span class="va">patient_id</span>,<span class="va">num</span><span class="op">)</span></span></code></pre></div>
<p><strong>Calculate the average and standard deviation of continuous variables</strong></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span><span class="va">pat_table</span> <span class="op">=</span> <span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/calcu_age.html">calcu_age</a></span><span class="op">(</span><span class="va">.</span>,<span class="va">birthdate</span><span class="op">)</span></span>
<span><span class="fu">mead_sd</span><span class="op">(</span><span class="va">pat_table</span>,<span class="va">age</span><span class="op">)</span></span>
<span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/mean_sd.html">mean_sd</a></span><span class="op">(</span><span class="va">age</span><span class="op">)</span></span>
<span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/mean_sd.html">mean_sd</a></span><span class="op">(</span><span class="va">age</span>,ifunion <span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="aggregate-function-suitable-for-rwd-descriptive-statistics">Aggregate function suitable for RWD descriptive statistics<a class="anchor" aria-label="anchor" href="#aggregate-function-suitable-for-rwd-descriptive-statistics"></a>
</h3>
<p><strong>Quick statistics on the number of patients in the table</strong></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datatable1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>patient_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"patent"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span>visit_id  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"visit"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">datatable2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span> patient <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"patent"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span> visit_id  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"visit"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/pe.html">pe</a></span><span class="op">(</span><span class="va">datatable1</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/pe.html">pe</a></span><span class="op">(</span><span class="va">datatable2</span>,<span class="va">patient</span><span class="op">)</span></span></code></pre></div>
<p><strong>Calculate the number and proportion of subsets</strong></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span><span class="va">pat_small</span> <span class="op">=</span> <span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/calcu_age.html">calcu_age</a></span><span class="op">(</span><span class="va">.</span>,<span class="va">birthdate</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="st">"age"</span><span class="op">&gt;</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">pat_table</span> <span class="op">=</span> <span class="va">data_med</span><span class="op">$</span><span class="va">pat</span></span>
<span><span class="fu"><a href="../reference/pop_perc.html">pop_perc</a></span><span class="op">(</span><span class="va">pat_small</span>,<span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
<p><strong>Quickly generate the age of the patient</strong>、</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span><span class="co">## Calculate the age of the patient based on the present time</span></span>
<span><span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/calcu_age.html">calcu_age</a></span><span class="op">(</span><span class="va">.</span>,<span class="va">birthdate</span><span class="op">)</span></span>
<span><span class="co">## Calculate the age of the patient based on the index date</span></span>
<span><span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/calcu_age.html">calcu_age</a></span><span class="op">(</span><span class="va">.</span>,<span class="va">birthdate</span>,<span class="va">index_date</span><span class="op">)</span></span></code></pre></div>
<p><strong>Generate label function developed for <code><a href="https://rdrr.io/r/base/cut.html" class="external-link">base::cut()</a></code></strong></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">breaks_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>,<span class="fl">30</span>,<span class="fl">40</span>,<span class="fl">50</span>,<span class="fl">60</span>,<span class="fl">70</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cut_label.html">cut_label</a></span><span class="op">(</span><span class="va">breaks_age</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/cut_label.html">cut_label</a></span><span class="op">(</span><span class="va">breaks_age</span>,<span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><strong>Add corresponding classified data columns to one or more consecutive data</strong></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for one</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span><span class="va">pat</span> <span class="op">=</span> <span class="va">data_med</span><span class="op">$</span><span class="va">pat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/calcu_age.html">calcu_age</a></span><span class="op">(</span><span class="va">.</span>,<span class="va">birthdate</span><span class="op">)</span></span>
<span></span>
<span><span class="va">breaks_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>,<span class="fl">30</span>,<span class="fl">40</span>,<span class="fl">50</span>,<span class="fl">60</span>,<span class="fl">70</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mutate_class.html">mutate_class</a></span><span class="op">(</span><span class="va">pat</span>,<span class="va">breaks_age</span>,<span class="va">age</span>,digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># for more</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lab_wider</span> <span class="op">=</span> <span class="va">data_med</span><span class="op">$</span><span class="va">lab</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tr.html">tr</a></span><span class="op">(</span><span class="va">.</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test_date"</span><span class="op">)</span>,<span class="st">"dat"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">patient_id</span>,<span class="va">lab_name</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">test_date</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="fu">slice_tail</span><span class="op">(</span>n <span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">patient_id</span>,<span class="va">lab_name</span> ,<span class="va">lab_va</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tr.html">tr</a></span><span class="op">(</span><span class="va">.</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lab_va"</span><span class="op">)</span>,<span class="st">"num"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">spread</span><span class="op">(</span><span class="va">lab_name</span>,<span class="va">lab_va</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>  <span class="fu">distinct</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lab_wider</span><span class="op">)</span></span>
<span></span>
<span><span class="va">HbA1c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">6.5</span>,<span class="fl">7.0</span>,<span class="fl">8.0</span>,<span class="fl">9.0</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">TC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">5.2</span>,<span class="fl">6.2</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">LDL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">3.4</span>,<span class="fl">4.1</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">HDL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.0</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">TG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.7</span>,<span class="fl">2.3</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span><span class="va">WBC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">4</span>,<span class="fl">10</span>,<span class="cn">Inf</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## keep only the columns related to the analysis</span></span>
<span><span class="va">lib_name_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lab_wider</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="co">## this step need to adjust the order of list subsets in name_list order</span></span>
<span><span class="va">list_cut</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">HbA1c</span>,<span class="va">HDL</span>,<span class="va">LDL</span>,<span class="va">TC</span>,<span class="va">TG</span>,<span class="va">WBC</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cut_dataframe</span> <span class="op">=</span> <span class="fu"><a href="../reference/mmc.html">mmc</a></span><span class="op">(</span><span class="va">lab_wider</span>,<span class="va">lib_name_list</span>,<span class="va">list_cut</span>,digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><strong>use <code>gtsummary</code> to faster descriptive statistics</strong></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Add a missing data to fully demonstrate the function of the function</span></span>
<span><span class="va">lab_wider_cut</span> <span class="op">=</span> <span class="va">cut_dataframe</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">.</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">NA</span>,nrow <span class="op">=</span> <span class="fl">1</span>,ncol <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">lab_wider_cut</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>          <span class="fu">rename_at</span><span class="op">(</span><span class="fu">vars</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> ,<span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lab_wider_cut</span><span class="op">)</span><span class="op">)</span> <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>patient_id <span class="op">=</span> <span class="fu">replace_na</span><span class="op">(</span><span class="va">patient_id</span>, <span class="st">"test_id"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## faster descriptive statistics.</span></span>
<span><span class="va">data_lab_calcu</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calcu.html">calcu</a></span><span class="op">(</span><span class="va">lab_wider_cut</span><span class="op">[</span>,<span class="op">-</span><span class="fl">1</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">lab_wider</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><strong>Extract the statistical summary generated by <code>calcu</code> for continuous data</strong></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Statistical results of a single indicator</span></span>
<span><span class="va">bind_cut_cont_test</span> <span class="op">=</span> <span class="fu"><a href="../reference/bind_cut_cont.html">bind_cut_cont</a></span><span class="op">(</span><span class="va">data_lab_calcu</span>,<span class="st">"HbA1c"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Statistical results of multiple indicators</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_df</a></span><span class="op">(</span><span class="va">lib_name_list</span>,<span class="va">bind_cut_cont</span>,</span>
<span>              gt_table_body <span class="op">=</span> <span class="va">data_lab_calcu</span>,ppop<span class="op">=</span><span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p><strong>Extract the statistical summary generated by <code>calcu</code> for classified data</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">data_med</span><span class="op">)</span></span>
<span><span class="va">diags</span> <span class="op">=</span> <span class="va">data_med</span><span class="op">$</span><span class="va">diag</span></span>
<span><span class="va">aim_select</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"patient_id"</span>,<span class="st">"visit_id"</span>,<span class="st">"diag_union"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diag_wider</span> <span class="op">=</span> <span class="fu"><a href="../reference/wider_clean.html">wider_clean</a></span><span class="op">(</span><span class="va">diags</span>,<span class="va">aim_select</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diag_wider_calcu</span> <span class="op">=</span> <span class="va">diag_wider</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">select</span><span class="op">(</span><span class="op">!</span><span class="st">"patient_id"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="st">"vascular disease"</span> <span class="op">=</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="../reference/calcu.html">calcu</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span></span>
<span></span>
<span><span class="va">group_list</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dyslipidemia"</span>,<span class="st">"high blood pressure"</span>,<span class="st">"myocardial infarction"</span><span class="op">)</span></span>
<span><span class="va">merge_subgroup_name</span> <span class="op">=</span> <span class="st">"vascular disease"</span></span>
<span><span class="co">#'</span></span>
<span><span class="fu"><a href="../reference/bind_cut_cate.html">bind_cut_cate</a></span><span class="op">(</span><span class="va">diag_wider_calcu</span>,<span class="va">group_list</span>,<span class="va">merge_subgroup_name</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/bind_cut_cate.html">bind_cut_cate</a></span><span class="op">(</span><span class="va">diag_wider_calcu</span>,<span class="va">group_list</span>,ppop<span class="op">=</span><span class="fl">1000</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Teague Tian.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
